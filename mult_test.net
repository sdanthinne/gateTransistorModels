* Z:\home\sdanthinne\Documents\307\gateTransistorModels\mult_test.asc
Vdd N001 0 5
XX2 N001 a b c cout s s_full_adder
XX1 N001 B[0] B[1] B[2] B[3] A[0] A[1] A[2] A[3] s[0] s[1] s[2] s[3] s[4] s[5] s[6] s[7] s_4bit_mult

* block symbol definitions
.subckt s_full_adder Vdd A B cin cout s
XX6 Vdd N001 A B s_xor
XX1 Vdd s N001 cin s_xor
XX2 Vdd cin N001 N002 s_and
XX3 Vdd B A N003 s_and
XX4 Vdd cout N002 N003 s_xor
.ends s_full_adder

.subckt s_4bit_mult Vdd A[0] A[1] A[2] A[3] B[0] B[1] B[2] B[3] s[0] s[1] s[2] s[3] s[4] s[5] s[6] s[7]
XX1 Vdd A[3] B[0] B1[2] s_and
XX2 Vdd A[2] B[0] B1[1] s_and
XX3 Vdd A[1] B[0] B1[0] s_and
XX4 Vdd A[0] B[0] s[0] s_and
XX5 N001 A[0] B[1] A1[0] s_and
XX6 N001 A[1] B[1] A1[1] s_and
XX7 N001 A[2] B[1] A1[2] s_and
XX8 N001 A[3] B[1] A1[3] s_and
XX9 Vdd B1[0] B1[1] B1[2] 0 A1[0] A1[1] A1[2] A1[3] s[1] B2[1] B2[2] B2[3] B2[4] s_4bit_adder
XX10 Vdd B2[1] B2[2] B2[3] B2[4] A2[0] A2[1] A2[2] A2[3] s[2] B3[1] B3[2] B3[3] B3[4] s_4bit_adder
XX11 Vdd A[0] B[2] A2[0] s_and
XX12 Vdd A[1] B[2] A2[1] s_and
XX13 Vdd A[2] B[2] A2[2] s_and
XX14 Vdd A[3] B[2] A2[3] s_and
XX15 Vdd A[0] B[3] A3[0] s_and
XX16 Vdd A[1] B[3] A3[1] s_and
XX17 Vdd A[2] B[3] A3[2] s_and
XX18 Vdd A[3] B[3] A3[3] s_and
XX19 Vdd B3[1] B3[2] B3[3] B3[4] A3[0] A3[1] A3[2] A3[3] s[3] s[4] s[5] s[6] s[7] s_4bit_adder
.ends s_4bit_mult

.subckt s_xor Vdd Vout A B
M1 N003 A Vdd Vdd CMOSP_0.5
M2 N004 B Vdd Vdd CMOSP_0.5
M3 Vout N002 N003 N003 CMOSP_0.5
M4 Vout N001 N004 N004 CMOSP_0.5
M5 Vout A N005 N005 CMOSN_0.5
M6 Vout N001 N006 N006 CMOSN_0.5
M7 N005 B 0 0 CMOSN_0.5
M8 N006 N002 0 0 CMOSN_0.5
XX1 A N001 Vdd s_inv
XX2 B N002 Vdd s_inv
.ends s_xor

.subckt s_and Vdd A B Vout
M1 N001 B N002 N002 CMOSN_0.5
M2 N002 A 0 0 CMOSN_0.5
M3 N001 B Vdd Vdd CMOSP_0.5
M4 N001 A Vdd Vdd CMOSP_0.5
XX1 N001 Vout Vdd s_inv
.ends s_and

.subckt s_4bit_adder Vdd B[0] B[1] B[2] B[3] A[0] A[1] A[2] A[3] s[0] s[1] s[2] s[3] s[4]
XX2 Vdd A[1] B[1] N001 N002 s[1] s_full_adder
XX3 Vdd A[2] B[2] N002 N003 s[2] s_full_adder
XX4 Vdd A[3] B[3] N003 s[4] s[3] s_full_adder
XX1 Vdd A[0] B[0] 0 N001 s[0] s_full_adder
.ends s_4bit_adder

.subckt s_inv vin vout vdd
M1 vout vin vdd vdd PMOS
M2 vout vin 0 0 NMOS
.ends s_inv

.model NMOS NMOS
.model PMOS PMOS
.lib C:\users\sdanthinne\My Documents\LTspiceXVII\lib\cmp\standard.mos
.lib DetailedModel.mod
.inc fourSource.txt
.tran 256u
Va_ha a 0 PULSE(0 5 0 100p 100p 4u  8u 8)
Vb_ha b 0 PULSE(0 5 0 100p 100p 8u  16u 8)
Vc_ha c 0 PULSE(0 5 0 100p 100p 2u  4u 8)
.backanno
.end
